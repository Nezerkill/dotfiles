# -----------------------------------------------------
# OPTIMIZED KEY BINDINGS (ThinkPad X13)
# -----------------------------------------------------

# --- Переменные ---
$mainMod = SUPER
$term = kitty
$file = nautilus
$browser = firefox
$menu = rofi -show drun

# --- Основные приложения ---
bind = $mainMod, X, exec, $term
bind = $mainMod, E, exec, $file
bind = $mainMod, B, exec, $browser
bind = $mainMod, SPACE, exec, $menu

# --- Управление окнами ---
bind = $mainMod, Q, killactive, 
bind = $mainMod ALT, V, togglefloating
bind = $mainMod, F, fullscreen
# Центрировать плавающее окно (удобно, если оно улетело)
bind = $mainMod, C, centerwindow 

# --- Меню выхода (Wlogout) ---
bind = $mainMod, ESCAPE, exec, wlogout

# --- Навигация (Vim-style) ---
bind = $mainMod, H, movefocus, l
bind = $mainMod, L, movefocus, r
bind = $mainMod, K, movefocus, u
bind = $mainMod, J, movefocus, d

# Переключение на последнее активное окно (как Alt-Tab)
bind = $mainMod, TAB, focuscurrentorlast

# --- Перемещение окон (Vim-style) ---
bind = $mainMod SHIFT, H, movewindow, l
bind = $mainMod SHIFT, L, movewindow, r
bind = $mainMod SHIFT, K, movewindow, u
bind = $mainMod SHIFT, J, movewindow, d

# --- Группы (Табы) - Опционально, но удобно для кодинга ---
bind = $mainMod, G, togglegroup 
bind = $mainMod CTRL, L, changegroupactive, f
bind = $mainMod CTRL, H, changegroupactive, b

# --- Воркспейсы (1-5) ---
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5

# Скролл по воркспейсам колесиком мыши
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1

# --- Отправка окна на воркспейс ---
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5

# --- Специальные воркспейсы (Scratchpads) ---
# Telegram (Pyprland)
bind = $mainMod, T, exec, pypr toggle telegram
# Если добавишь терминал в pyprland.toml:
bind = $mainMod, Z, exec, pypr toggle term 
bind = $mainMod, V, exec, pypr toggle volume # pavucontrol

# --- Инструменты (OCR, Clipboard, Emoji) ---
# OCR (Распознавание текста)
bind = $mainMod, O, exec, grim -g "$(slurp)" - | tesseract - - -l rus+eng | wl-copy && notify-send "OCR" "Текст скопирован!"

# Буфер обмена
bind = $mainMod SHIFT, V, exec, cliphist list | rofi -dmenu | cliphist decode | wl-copy

# Эмодзи
bind = $mainMod, PERIOD, exec, rofi -show emoji

# Центр уведомлений
bind = $mainMod, N, exec, swaync-client -t -sw

# --- Скриншоты ---
bind = , Print, exec, ~/.config-dev/dotfiles/hypr/scripts/screenshot.sh full
bind = $mainMod SHIFT, S, exec, ~/.config-dev/dotfiles/hypr/scripts/screenshot.sh area
bind = $mainMod, Print, exec, ~/.config-dev/dotfiles/hypr/scripts/screenshot.sh edit

# --- Игровой режим ---
bind = $mainMod, F1, exec, ~/.config-dev/dotfiles/hypr/scripts/gamemode.sh

# --- Медиа и Яркость ---
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous
bindl = , XF86AudioNext, exec, playerctl next

# Громкость (с ограничением 150%)
bindel = , XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 5%+
bindel = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindl = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle

# Микрофон
bind = $mainMod, M, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle && notify-send "Микрофон" "Переключен"

# Яркость
bindel = , XF86MonBrightnessUp, exec, brightnessctl s 5%+
bindel = , XF86MonBrightnessDown, exec, brightnessctl s 5%-

# Блокировка крышки
bindl = , switch:on:Lid Switch, exec, hyprlock

# --- SUBMAPS (Режимы) ---

# 1. Режим изменения размера (Resize)
bind = $mainMod, R, submap, resize
submap = resize
binde = , l, resizeactive, 10 0
binde = , h, resizeactive, -10 0
binde = , k, resizeactive, 0 -10
binde = , j, resizeactive, 0 10
bind = , escape, submap, reset 
bind = , catchall, submap, reset
submap = reset

# 2. Системный режим (System) - Замена опасным хоткеям
# Нажми Win+0, чтобы войти в режим управления питанием
bind = $mainMod, 0, submap, system
submap = system
bind = , l, exec, hyprlock          # L - Lock
bind = , l, submap, reset           # Выход из режима после нажатия
bind = , e, exit                    # E - Exit Hyprland (Опасно, но теперь скрыто)
bind = , r, exec, hyprctl reload    # R - Reload Config
bind = , r, submap, reset
bind = , s, exec, systemctl suspend # S - Sleep
bind = , s, submap, reset
bind = , escape, submap, reset
submap = reset

# --- Мышь (перемещение/ресайз) ---
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow
