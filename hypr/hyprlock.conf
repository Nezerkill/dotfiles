# -----------------------------------------------------
# HYPRLOCK CONFIGURATION
# -----------------------------------------------------

general {
    no_fade_in = false
    grace = 0
    disable_loading_bar = true
}

# --- ФОН ---
background {
    monitor =
    # Указываем путь к нашим обоям
    path = ~/.config-dev/dotfiles/assets/waves.png
    
    # Эффекты (размытие и затемнение)
    blur_passes = 3
    blur_size = 7
    noise = 0.0117
    contrast = 0.8916
    brightness = 0.8172
    vibrancy = 0.1696
    vibrancy_darkness = 0.0
}

# --- ПОЛЕ ВВОДА ПАРОЛЯ ---
input-field {
    monitor =
    size = 250, 50
    outline_thickness = 3
    dots_size = 0.33
    dots_spacing = 0.15
    dots_center = true
    dots_rounding = -1
    
    # Цвета (Catppuccin Mocha)
    outer_color = rgb(137, 180, 250) # Blue (обычный цвет)
    inner_color = rgb(30, 30, 46)    # Base
    font_color = rgb(205, 214, 244)  # Text
    
    # --- ИНДИКАТОР CAPS LOCK (Добавлено) ---
    # Когда Caps Lock включен, кольцо станет Желтым/Оранжевым
    capslock_color = rgb(250, 179, 135) 
    
    # Настройки проверки пароля
    check_color = rgb(249, 226, 175) # Yellow (проверка)
    fail_color = rgb(243, 139, 168)  # Red (ошибка)
    fail_text = <i>$FAIL <b>($ATTEMPTS)</b></i>
    
    fade_on_empty = true
    placeholder_text = <i>Password...</i>
    hide_input = false
    position = 0, -20
    halign = center
    valign = center
}
# --- ЧАСЫ ---
label {
    monitor =
    text = cmd[update:1000] echo "$(date +"%H:%M")"
    color = rgba(205, 214, 244, 1.0)
    font_size = 100
    font_family = JetBrainsMono Nerd Font ExtraBold
    
    # ИЗМЕНЕНИЕ ЗДЕСЬ: Поднимаем часы выше (было 100 -> ставим 160)
    position = 0, 210 
    
    halign = center
    valign = center
    shadow_passes = 5
    shadow_size = 10
}

# --- ДАТА ---
label {
    monitor =
    text = cmd[update:1000] echo "$(date +"%A, %d %B %Y")"
    color = rgba(205, 214, 244, 1.0)
    font_size = 20
    font_family = JetBrainsMono Nerd Font Bold
    
    # ИЗМЕНЕНИЕ ЗДЕСЬ: Опускаем дату чуть ниже (было 50 -> ставим 40)
    position = 0, 90
    
    halign = center
    valign = center
}

# --- ИНДИКАТОР РАСКЛАДКИ ---
label {
    monitor =
    # $LAYOUT - встроенная переменная Hyprlock
    text =   $LAYOUT
    color = rgb(180, 190, 254)
    font_size = 12
    font_family = JetBrainsMono Nerd Font Bold
    
    # Позиция под полем ввода (input-field у нас на -20, значит это ставим ниже)
    position = 0, -80
    
    halign = center
    valign = center
}
# --- МЕДИА ПЛЕЕР ---

# 1. Обложка альбома
image {
    monitor =
    # Скрипт возвращает путь к картинке
    path = 
    size = 100
    rounding = 10 # Скругление углов
    border_size = 2
    border_color = rgb(137, 180, 250) # Blue
    rotate = 0
    reload_time = 2 # Проверять смену обложки каждые 2 сек
    reload_cmd = ~/.config-dev/dotfiles/hypr/scripts/playerctlock.sh --arturl
    
    position = 0, 200 # Позиция (подберите под себя, это внизу)
    halign = center
    valign = bottom
    
    # Трюк: прозрачность 0, если ничего не играет (скрипт вернет пустоту, hyprlock не отрисует)
}

# 2. Название трека
label {
    monitor =
    text = cmd[update:2000] ~/.config-dev/dotfiles/hypr/scripts/playerctlock.sh --title
    color = rgb(205, 214, 244) # Text
    font_size = 14
    font_family = JetBrainsMono Nerd Font Bold
    
    position = 0, 150 # Чуть ниже обложки
    halign = center
    valign = bottom
}

# 3. Исполнитель
label {
    monitor =
    text = cmd[update:2000] ~/.config-dev/dotfiles/hypr/scripts/playerctlock.sh --artist
    color = rgb(180, 190, 254) # Subtext
    font_size = 12
    font_family = JetBrainsMono Nerd Font
    
    position = 0, 120 # Еще ниже
    halign = center
    valign = bottom
}
# --- КНОПКИ УПРАВЛЕНИЯ (ВИЗУАЛЬНЫЕ) ---

# 1. Previous (Назад)
label {
    monitor =
    text = 
    color = rgb(205, 214, 244)
    font_size = 40
    font_family = JetBrainsMono Nerd Font
    
    position = -60, 30  # Сдвигаем влево
    halign = center
    valign = bottom
}

# 2. Play/Pause (Динамическая)
label {
    monitor =
    text = cmd[update:1000] ~/.config-dev/dotfiles/hypr/scripts/playerctlock.sh --status
    color = rgb(205, 214, 244)
    font_size = 50      # Чуть больше остальных
    font_family = JetBrainsMono Nerd Font
    
    position = 0, 30    # По центру
    halign = center
    valign = bottom
}

# 3. Next (Вперед)
label {
    monitor =
    text = 
    color = rgb(205, 214, 244)
    font_size = 40
    font_family = JetBrainsMono Nerd Font
    
    position = 60, 30   # Сдвигаем вправо
    halign = center
    valign = bottom
}

# --- ПОГОДА ---
label {
    monitor =
    # Обновляем раз в 30 минут (1800000 мс), чтобы не спамить сервис
    text = cmd[update:1800000] ~/.config-dev/dotfiles/hypr/scripts/weather.sh
    color = rgb(180, 190, 254) # Lavender
    font_size = 18
    font_family = JetBrainsMono Nerd Font Bold
    
    # Позиция: чуть ниже даты (которая у нас была на 40, значит ставим 0 или -10)
    position = 0, 40
    
    halign = center
    valign = center
}
